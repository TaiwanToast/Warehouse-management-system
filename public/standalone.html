<!DOCTYPE html>
<html lang="zh-Hant">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>惠中寺倉儲管理系統</title>
	<link rel="stylesheet" href="styles.css" />
</head>
<body>
	<header>
		<h1>惠中寺倉儲管理系統</h1>
		<nav class="nav">
			<a href="#" class="active" data-page="add">新增</a>
			<a href="#" data-page="search">查詢</a>
			<a href="#" data-page="manage">管理</a>
			<a href="#" data-page="locations">樓層與區域</a>
		</nav>
	</header>
	<main>
		<!-- 新增頁面 -->
		<section id="add-page" class="panel">
			<h2>新增物品</h2>
			<form id="item-form">
				<input name="name" placeholder="物品名稱" required />
				<textarea name="description" placeholder="描述（選填）"></textarea>
				<select name="floor_id" id="item-floor" required></select>
				<select name="room_id" id="item-room" required></select>
				<input type="file" name="image" accept="image/*" id="image-input" />
				<button type="submit">新增物品</button>
			</form>
		</section>

		<!-- 查詢頁面 -->
		<section id="search-page" class="panel" style="display:none;">
			<h2>查詢物品</h2>
			<div class="flex">
				<input id="q" placeholder="以名稱查詢" />
				<select id="q-floor"></select>
				<select id="q-room"></select>
				<button id="search">查詢</button>
			</div>
			<div id="results" class="grid"></div>
		</section>

		<!-- 管理頁面 -->
		<section id="manage-page" class="panel" style="display:none;">
			<h2>管理物品</h2>
			<div class="flex">
				<input id="q-manage" placeholder="關鍵字" />
				<select id="q-floor-manage"></select>
				<select id="q-room-manage"></select>
				<button id="search-manage">載入</button>
			</div>
			<div id="results-manage" class="grid"></div>
		</section>

		<!-- 樓層區域管理頁面 -->
		<section id="locations-page" class="panel" style="display:none;">
			<h2>樓層與區域</h2>
			<div class="flex">
				<div class="card" style="flex:1 1 360px;">
					<h3>樓層</h3>
					<div class="flex">
						<input id="floor-name" placeholder="樓層名稱，例如：一樓" />
						<button id="add-floor">新增樓層</button>
					</div>
					<ul id="floors"></ul>
				</div>
				<div class="card" style="flex:2 1 480px;">
					<h3>區域</h3>
					<div class="flex">
						<select id="room-floor"></select>
						<input id="room-name" placeholder="區域名稱，例如：倉庫 A" />
						<button id="add-room">新增區域</button>
					</div>
					<ul id="rooms"></ul>
				</div>
			</div>
		</section>
	</main>

	<!-- 編輯對話框 -->
	<dialog id="editDialog">
		<form method="dialog" id="editForm">
			<h3>編輯物品</h3>
			<input name="name" placeholder="物品名稱" required />
			<textarea name="description" placeholder="描述（選填）"></textarea>
			<select name="floor_id" id="edit-floor" required>
				<option value="">選擇樓層</option>
			</select>
			<select name="room_id" id="edit-room" required>
				<option value="">選擇區域</option>
			</select>
			<button id="saveEdit" value="default" style="width:100%; font-size:16px; padding:12px; margin-bottom:8px;">儲存</button>
			<button value="cancel" style="background:#dc3545; width:100%; font-size:14px; padding:8px;">取消</button>
		</form>
	</dialog>

	<!-- 圖片預覽對話框 -->
	<dialog id="imgDialog">
		<div style="background:var(--panel); padding:8px; border-radius:16px; border:1px solid var(--border); max-width:min(92vw,900px);">
			<img id="imgPreview" alt="預覽" style="display:block; width:100%; height:auto; border-radius:12px;" />
			<div class="flex" style="justify-content:flex-end; margin-top:8px;">
				<button id="closeImg" style="width:auto;">關閉</button>
			</div>
		</div>
	</dialog>

	<script src="standalone.js"></script>
</body>
</html>
