
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>惠中寺倉儲管理系統 - 管理</title>
	<link rel="stylesheet" href="/styles.css" />
</head>
<body>
	<header>
		<div style="display:flex; align-items:center; justify-content:space-between;">
			<div style="display:flex; align-items:center; gap:2em;">
				<h1>惠中寺倉儲管理系統</h1>
				<nav class="nav" style="display:flex; align-items:center; gap:0.5em;">
					<a href="/add.html">新增</a>
					<a href="/search.html">查詢</a>
					<a href="/manage.html" class="active">管理</a>
					<a href="/locations.html">樓層與區域</a>
				</nav>
			</div>
			<div id="user-info" style="display:flex; align-items:center; gap:8px;">
				<span id="login-user-label" style="writing-mode:horizontal-tb; text-orientation:sideways; white-space:nowrap;"> </span>
				<button id="logout-btn">登出</button>
			</div>
		</div>
	</header>
	<main>
		<section class="panel">
			<h2>管理物品</h2>
			<div class="flex">
				<input id="q" placeholder="關鍵字" />
				<select id="q-floor-manage"></select>
				<select id="q-room-manage"></select>
				<button id="search">載入</button>
			</div>
			<div id="results" class="grid"></div>
		</section>
		<dialog id="editDialog">
			<form method="dialog" id="editForm">
				<h3>編輯物品</h3>
				<input name="name" placeholder="物品名稱" required />
				<input name="owner" placeholder="所屬人 或 單位（例如：知彥法師 或 法務）" />
				<textarea name="description" placeholder="描述（選填）"></textarea>
				<select name="floor_id" id="edit-floor" required>
					<option value="">選擇樓層</option>
				</select>
				<select name="room_id" id="edit-room" required>
					<option value="">選擇區域</option>
				</select>
				<h4>狀態</h4>
				<select name="status" id="edit-status">
					<option value="available">可用</option>
					<option value="borrowed">借出中</option>
					<option value="returned">已歸還</option>
				</select>
				<input name="borrower" id="edit-borrower" placeholder="借用人（狀態為借出中時填寫）" />
				<input name="borrow_location" id="edit-borrow-location" placeholder="借用地點（狀態為借出中時填寫）" />
				<button id="saveEdit" value="default" style="width:100%; font-size:16px; padding:12px; margin-bottom:8px;">儲存</button>
				<button value="cancel" style="background:#dc3545; width:100%; font-size:14px; padding:8px;">取消</button>
			</form>
		</dialog>
	</main>
	<script src="/manage.js"></script>
	<script src="/user-bar.js"></script>
</body>
</html>
